


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.5.12">
    
    
      
        <title>Eventing - RocketMod Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.4dd2dd8d.min.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.6a5ad368.min.css">
      
      
        
        
        <meta name="theme-color" content="#00bdd6">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="cyan" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#eventing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../.." title="RocketMod Documentation" class="md-header-nav__button md-logo" aria-label="RocketMod Documentation">
      
  <img src="../../../images/rocket.svg" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            RocketMod Documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Eventing
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/RocketMod/Rocket/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    RocketMod/Rocket
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="RocketMod Documentation" class="md-nav__button md-logo" aria-label="RocketMod Documentation">
      
  <img src="../../../images/rocket.svg" alt="logo">

    </a>
    RocketMod Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/RocketMod/Rocket/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    RocketMod/Rocket
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      User Guide
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="User Guide" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      Installation
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Installation" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        <span class="md-nav__icon md-icon"></span>
        Installation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guide/installation/unturned3/" title="Unturned 3" class="md-nav__link">
      Unturned 3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guide/installation/eco.md" title="Eco" class="md-nav__link">
      Eco
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Configuration
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Configuration" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        <span class="md-nav__icon md-icon"></span>
        Configuration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guide/configuration/configurations/" title="Configurations" class="md-nav__link">
      Configurations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guide/configuration/translations/" title="Translations" class="md-nav__link">
      Translations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guide/configuration/permissions/" title="Permissions" class="md-nav__link">
      Permissions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guide/configuration/plugins/" title="Plugins" class="md-nav__link">
      Plugins
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      Plugins
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Plugins" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        <span class="md-nav__icon md-icon"></span>
        Plugins
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guide/plugins/installation/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../user-guide/support/" title="Support" class="md-nav__link">
      Support
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Development Guide
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Development Guide" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Development Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-1" type="checkbox" id="nav-3-1">
    
    <label class="md-nav__link" for="nav-3-1">
      Getting Started
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Getting Started" data-md-level="2">
      <label class="md-nav__title" for="nav-3-1">
        <span class="md-nav__icon md-icon"></span>
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../making-your-first-plugin/" title="Making your first plugin" class="md-nav__link">
      Making your first plugin
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../commands/" title="Commands" class="md-nav__link">
      Commands
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2">
    
    <label class="md-nav__link" for="nav-3-2">
      Misc
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Misc" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        <span class="md-nav__icon md-icon"></span>
        Misc
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../misc/migration-guide/" title="Migration Guide" class="md-nav__link">
      Migration Guide
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../misc/services/" title="List of all Services" class="md-nav__link">
      List of all Services
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../misc/events/" title="List of all Events" class="md-nav__link">
      List of all Events
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      About
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="About" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../about/documentation/" title="Documentation" class="md-nav__link">
      Documentation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#listening-for-events" class="md-nav__link">
    Listening for events
  </a>
  
    <nav class="md-nav" aria-label="Listening for events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-listener-class" class="md-nav__link">
    Example listener class
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-priorities-and-cancellation" class="md-nav__link">
    Event priorities and cancellation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-custom-events-eg-for-other-plugins" class="md-nav__link">
    Creating custom events (e.g. for other plugins)
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/RestoreMonarchyCommunity/Rocket.Documentation/edit/master/content/development-guide/getting-started/eventing.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="eventing">Eventing<a class="headerlink" href="#eventing" title="Permanent link">&para;</a></h1>
<p>Events are used to trigger actions when something happens (e.g. player joined, server is shutting down, etc.) </p>
<p>The default C# events used with old RocketMod 4 were very limited. It was not possible to have prioritized events. The new API allows controlling lifespan and execution order of events.</p>
<h2 id="listening-for-events">Listening for events<a class="headerlink" href="#listening-for-events" title="Permanent link">&para;</a></h2>
<p>To listen to events, you will have to create a class which implements <code>IEventListener&lt;YourTargetEvent&gt;</code>. 
Don't forget to add <code>[EventHandler]</code> attribute to your method to set various options like priority.</p>
<p>You have to register your event listener with <code>EventBus.AddEventListener(YourPlugin, YourIListener)</code> on plugin load to register your events. </p>
<h3 id="example-listener-class">Example listener class<a class="headerlink" href="#example-listener-class" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="k">class</span> <span class="nc">MyEventListener</span> <span class="p">:</span> <span class="n">IEventListener</span><span class="p">&lt;</span><span class="n">PlayerConnectedEvent</span><span class="p">&gt;,</span> <span class="n">IEventListener</span><span class="p">&lt;</span><span class="n">PlayerChatEvent</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="n">IChatManager</span> <span class="n">chatManager</span><span class="p">;</span>
    <span class="k">public</span> <span class="nf">MyEventListener</span><span class="p">(</span><span class="n">IChatManager</span> <span class="n">chatManager</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">chatManager</span> <span class="p">=</span> <span class="n">chatManager</span><span class="p">;</span>
    <span class="p">}</span>

<span class="na">    [EventHandler]</span>
    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">HandleEvent</span><span class="p">(</span><span class="n">IEventEmitter</span> <span class="n">emitter</span><span class="p">,</span> <span class="n">PlayerConnectedEvent</span> <span class="n">@event</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">await</span> <span class="n">chatManager</span><span class="p">.</span><span class="n">BroadcastAsync</span><span class="p">(</span><span class="n">@event</span><span class="p">.</span><span class="n">Player</span><span class="p">.</span><span class="n">Name</span> <span class="p">+</span> <span class="s">&quot; joined&quot;</span><span class="p">);</span>
    <span class="p">}</span>

<span class="na">    [EventHandler]</span>
    <span class="k">public</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">HandleEvent</span><span class="p">(</span><span class="n">IEventEmitter</span> <span class="n">emitter</span><span class="p">,</span> <span class="n">PlayerChatEvent</span> <span class="n">@event</span><span class="p">)</span>
    <span class="p">{</span> 
        <span class="k">if</span><span class="p">(</span><span class="n">ContainsBadWord</span><span class="p">(</span><span class="n">@event</span><span class="p">.</span><span class="n">Message</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="n">@event</span><span class="p">.</span><span class="n">IsCancelled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">bool</span> <span class="nf">ContainsBadWord</span><span class="p">(</span><span class="kt">string</span> <span class="n">message</span><span class="p">)</span>
            <span class="p">=&gt;</span> <span class="k">return</span> <span class="n">message</span><span class="p">.</span><span class="n">Contains</span><span class="p">(</span><span class="s">&quot;Trojaner&quot;</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">MyPluginMain</span> <span class="p">:</span> <span class="n">Plugin</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">IChatManager</span> <span class="n">chatManager</span><span class="p">;</span>
    <span class="k">private</span> <span class="k">readonly</span> <span class="n">IEventBus</span> <span class="n">eventBus</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">MyPluginMain</span><span class="p">(</span><span class="n">IDependencyContainer</span> <span class="n">container</span><span class="p">,</span> <span class="n">IChatManager</span> <span class="n">chatManager</span><span class="p">,</span> <span class="n">IEventBus</span> <span class="n">eventBus</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="s">&quot;MyPlugin&quot;</span><span class="p">,</span> <span class="n">container</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="n">chatManager</span> <span class="p">=</span> <span class="n">chatManager</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="n">eventBus</span> <span class="p">=</span> <span class="n">eventBus</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">protected</span> <span class="k">override</span> <span class="k">async</span> <span class="n">Task</span> <span class="nf">OnActivate</span><span class="p">(</span><span class="kt">bool</span> <span class="n">isFromReload</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">eventBus</span><span class="p">.</span><span class="n">AddEventListener</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">new</span> <span class="n">MyEventListener</span><span class="p">(</span><span class="n">chatManager</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Execution order of events is like this:   </p>
<p><code>Lowest</code> -&gt; <code>Low</code> -&gt; <code>Normal</code> -&gt; <code>High</code> -&gt; <code>Highest</code> -&gt; <code>Monitor</code>.</p>
<p>You should only use monitor when it does not impact anything, for example when you use it purely for logging purposes.</p>
</div>
<h3 id="event-priorities-and-cancellation">Event priorities and cancellation<a class="headerlink" href="#event-priorities-and-cancellation" title="Permanent link">&para;</a></h3>
<p>EventHandlers can have priorities by using <code>[EventHandler(Priority = EventPriority.X)]</code>. </p>
<p>The method with <code>Lowest</code> will be executed first, and <code>Monitor</code> will be executed last. <code>Monitor</code> should be only be used by listener which do not do any changes.
If any event listener decides to cancel the event before your event listener is called, your listener will not be called.
You can use <code>[EventHandler(IgnoreCancelled = true)]</code> to receive cancelled events. This also allows you to un-cancel events by setting <code>Event.IsCancelled</code> to false.</p>
<h2 id="creating-custom-events-eg-for-other-plugins">Creating custom events (e.g. for other plugins)<a class="headerlink" href="#creating-custom-events-eg-for-other-plugins" title="Permanent link">&para;</a></h2>
<p>Create a new class which extends <code>Rocket.API.Eventing.Event</code>. If you want to have it cancellable, add <code>ICancellableEvent</code> to it. </p>
<div class="highlight"><pre><span></span><code><span class="k">public</span> <span class="k">class</span> <span class="nc">MyEvent</span><span class="p">:</span> <span class="n">Event</span><span class="p">,</span> <span class="n">ICancellableEvent</span>
<span class="p">{</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">SomeData</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="nf">MyEvent</span><span class="p">()</span> <span class="p">:</span> <span class="k">this</span><span class="p">(</span><span class="k">true</span><span class="p">)</span>
        <span class="p">{</span>

        <span class="p">}</span>

        <span class="k">public</span> <span class="nf">MyEvent</span><span class="p">(</span><span class="kt">bool</span> <span class="n">global</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">global</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="nf">MyEvent</span><span class="p">(</span><span class="n">EventExecutionTargetContext</span> <span class="n">executionTarget</span> <span class="p">=</span> <span class="n">EventExecutionTargetContext</span><span class="p">.</span><span class="n">Sync</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">global</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">executionTarget</span><span class="p">,</span> <span class="n">global</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="nf">MyEvent</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="n">EventExecutionTargetContext</span> <span class="n">executionTarget</span> <span class="p">=</span> <span class="n">EventExecutionTargetContext</span><span class="p">.</span><span class="n">Sync</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">global</span> <span class="p">=</span> <span class="k">true</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">executionTarget</span><span class="p">,</span> <span class="n">global</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="kt">bool</span> <span class="n">IsCancelled</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>You can trigger and handle your custom events like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">MyEvent</span> <span class="n">@event</span> <span class="p">=</span> <span class="k">new</span> <span class="n">MyEvent</span><span class="p">();</span>
<span class="n">@event</span><span class="p">.</span><span class="n">SomeData</span> <span class="p">=</span> <span class="n">data</span><span class="p">;</span> 
<span class="n">eventBus</span><span class="p">.</span><span class="n">Emit</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">@event</span><span class="p">,</span> <span class="n">callback</span><span class="p">:</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
       <span class="c1">//event has finished and all listeners were called</span>

       <span class="k">if</span><span class="p">(</span><span class="n">@event</span><span class="p">.</span><span class="n">IsCancelled</span><span class="p">)</span> <span class="c1">//if your event extends ICancellableEvent</span>
          <span class="k">return</span><span class="p">;</span>

       <span class="c1">// do something with @event.SomeData        </span>
<span class="p">});</span> <span class="c1">// plugins listening to events can change &quot;SomeData&quot;</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            RocketMod is licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/">CC BY-NC-ND 4.0</a><br>This documentation is licensed under <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0</a>
          </div>
        
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.3636a4ec.min.js"></script>
      <script src="../../../assets/javascripts/bundle.e9fe3281.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: [],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.5eca75d3.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>